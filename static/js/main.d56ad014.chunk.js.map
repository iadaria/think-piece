{"version":3,"sources":["firebase.js","components/providers/UserProvider.js","components/Post.jsx","components/AddPost.jsx","utilities.js","components/providers/PostsProvider.js","components/Posts.jsx","components/CurrentUser.jsx","components/SignIn.jsx","components/Authentication.jsx","components/UserProfile.jsx","components/Comment.jsx","components/AddComment.jsx","components/Comments.jsx","components/withUser.js","components/PostPage.jsx","components/Application.jsx","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","storage","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","signOut","window","createUserProfileDocument","user","additionalData","a","userRef","doc","uid","get","exists","displayName","email","photoURL","createdAt","Date","set","console","error","message","getUserDocument","collection","log","UserContext","createContext","UserProvider","state","unsubscribeFromAuth","componentDidMount","onAuthStateChanged","userAuth","onSnapshot","snapshot","setState","id","data","componentWillUnmount","this","children","props","Provider","value","Component","Post","title","content","stars","comments","currentUser","useContext","postRef","className","to","role","aria-label","moment","toDate","calendar","onClick","alert","update","postAuthor","belongsToCurrentUser","delete","defaultProps","AddPost","handleChange","event","target","name","handleSubmit","preventDefault","post","favorites","add","onSubmit","type","placeholder","onChange","collectIdsAndDocs","PostsContext","PostsProvider","posts","unsubscribe","docs","map","Posts","key","CurrentUser","src","alt","SignIn","password","Authentication","UserProfile","imageInput","handleSumbit","file","ref","child","put","then","response","getDownloadURL","files","Comment","AddComment","onCreate","Comments","comment","withUser","WrappedCompenent","WrappedComponent","Consumer","PostPage","unsubscribeFromPost","unsubscribeFromComments","commentsRef","createComment","match","params","postId","withRouter","Application","useEffect","parseData","location","pathname","split","exact","path","component","render","document","getElementById"],"mappings":"uSAkBAA,IAASC,cAXI,CACTC,OAAQ,0CACRC,WAAY,oCACZC,YAAa,2CACbC,UAAW,oBACXC,cAAe,gCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAMZ,IAAMC,EAAYV,IAASU,YACrBC,EAAOX,IAASW,OAChBC,EAAUZ,IAASY,UAEnBC,EAAW,IAAIb,IAASW,KAAKG,mBAC7BC,EAAmB,kBAAMJ,EAAKK,gBAAgBH,IAC9CI,EAAU,kBAAMN,EAAKM,WAElCC,OAAOlB,SAAWA,IAEX,IAAMmB,EAAyB,uCAAG,WAAOC,EAAMC,GAAb,uBAAAC,EAAA,yDAChCF,EADgC,wDAI/BG,EAAUb,EAAUc,IAAV,gBAAuBJ,EAAKK,MAJP,SAOdF,EAAQG,MAPM,iBASvBC,OATuB,wBAU1BC,EAAiCR,EAAjCQ,YAAaC,EAAoBT,EAApBS,MAAOC,EAAaV,EAAbU,SACrBC,EAAY,IAAIC,KAXW,mBAavBT,EAAQU,IAAR,aACFL,cACAC,QACAC,WACAC,aACGV,IAlBsB,0DAoBfa,QAAQC,MAAR,sBAAqC,KAAMC,SApB5B,iCAuB9BC,EAAgBjB,EAAKK,MAvBS,0DAAH,wDA0BzBY,EAAe,uCAAG,WAAOZ,GAAP,SAAAH,EAAA,yDACvBG,EADuB,yCACX,MADW,yCAGhBf,EAAU4B,WAAW,SAASd,IAAIC,IAHlB,gCAOTS,QAAQK,IAAI,sBAAuB,KAAMH,SAPhC,wDAAH,sD,GAUbpC,EAAf,E,2BChEawC,EAAcC,wBAAc,CAAErB,KAAM,OAuClCsB,E,4MApCXC,MAAQ,CAAEvB,KAAM,M,EAChBwB,oBAAsB,K,EAGtBC,kB,sBAAoB,sBAAAvB,EAAA,sDAChB,EAAKsB,oBAAsBjC,EAAKmC,mBAAL,+BAAAxB,EAAA,MAAwB,WAAMyB,GAAN,eAAAzB,EAAA,0DAC3CyB,EAD2C,gCAErB5B,EAA0B4B,GAFL,cAErCxB,EAFqC,OAG3CW,QAAQK,IAAI,gCAAiCQ,GAC7CxB,EAAQyB,YAAW,SAAAC,GACf,EAAKC,SAAS,CAAE9B,KAAK,aACfK,IAAKwB,EAASE,IAAOF,EAASG,aANG,kBASpC,EAAKF,SAAS,CAAE9B,KAAM2B,KATc,OAW/C,EAAKG,SAAS,CAAE9B,KAAM,OAXyB,2CAAxB,uDADX,2C,EAgBpBiC,qBAAuB,WACnB,EAAKT,uB,uDAGC,IACExB,EAASkC,KAAKX,MAAdvB,KACAmC,EAAaD,KAAKE,MAAlBD,SAER,OACI,kBAACf,EAAYiB,SAAb,CAAsBC,MAAOtC,GACxBmC,O,GA/BUI,a,iBCO3B,IAAMC,EAAO,SAAC,GAA8D,IAA5DT,EAA2D,EAA3DA,GAAIU,EAAuD,EAAvDA,MAAOC,EAAgD,EAAhDA,QAAS1C,EAAuC,EAAvCA,KAAMW,EAAiC,EAAjCA,UAAWgC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SAClDC,EAAcC,qBAAW1B,GAEzB2B,EAAUzD,EAAUc,IAAV,gBAAuB2B,IAWvC,OACI,6BAASiB,UAAU,QACf,yBAAKA,UAAU,iBACX,kBAAC,IAAD,CAAMC,GAAE,6BAAwBlB,IAC5B,4BAAKU,IAET,6BAAMC,IAEV,yBAAKM,UAAU,cACX,6BACI,2BACI,0BAAME,KAAK,MAAMC,aAAW,QAA5B,gBAGCR,GAEL,2BACI,0BAAMO,KAAK,MAAMC,aAAW,YAA5B,gBAGCP,GAEL,wCAAc5C,EAAKQ,aACnB,2BAAI4C,IAAOzC,EAAU0C,UAAUC,aAEnC,6BACI,4BAAQN,UAAU,OAAOO,QAnC5B,WACT,IAAKV,EAED,OADAW,MAAM,2BACC,KAEXT,EAAQU,OAAO,CAAEd,MAAOA,EAAQ,MA8BpB,QA7CpB,SAA8BE,EAAaa,GACvC,QAAKb,GACEA,EAAYxC,MAAQqD,EAAWrD,IA4CpBsD,CAAqBd,EAAa7C,IAChC,4BAAQgD,UAAU,SAASO,QAtChC,kBAAMR,EAAQa,WAsCT,cAQxBpB,EAAKqB,aAAe,CAChBpB,MAAO,yBACPC,QACI,0NACJ1C,KAAM,CACF+B,GAAI,MACJvB,YAAa,cACbC,MAAO,4BACPC,SAAU,sCAEdC,UAAW,IAAIC,KACf+B,MAAO,EACPC,SAAU,GAGCJ,Q,QCZAsB,E,4MA7DbvC,MAAQ,CAAEkB,MAAO,GAAIC,QAAS,I,EAE9BqB,aAAe,SAAAC,GAAU,IAAD,EACEA,EAAMC,OAAtBC,EADc,EACdA,KAAM5B,EADQ,EACRA,MACd,EAAKR,SAAL,eAAiBoC,EAAO5B,K,EAG1B6B,aAAe,SAAAH,GAGb,GAFAA,EAAMI,kBAED7E,EAAKsD,YAEN,OADAW,MAAM,2BACC,KALW,MAQK,EAAKjC,MAAxBkB,EARc,EAQdA,MAAOC,EARO,EAQPA,QARO,EASwBnD,EAAKsD,aAAe,GAE5DwB,EAAO,CACX5B,QACAC,UACA1C,KAAM,CACJK,IAfkB,EASdA,IAOJG,YAhBkB,EASTA,YAQTC,MAjBkB,EASIA,MAStBC,SAlBkB,EASWA,UAW/B4D,UAAW,EACX1B,SAAU,EACVjC,UAAW,IAAIC,MAGjBtB,EAAU4B,WAAW,SAASqD,IAAIF,GAElC,EAAKvC,SAAS,CAAEW,MAAO,GAAIC,QAAS,M,uDAG5B,IAAD,EACoBR,KAAKX,MAAxBkB,EADD,EACCA,MAAOC,EADR,EACQA,QACf,OACE,0BAAM8B,SAAUtC,KAAKiC,aAAcnB,UAAU,WAC3C,2BACEyB,KAAK,OACLP,KAAK,QACLQ,YAAY,QACZpC,MAAOG,EACPkC,SAAUzC,KAAK6B,eAEjB,2BACEU,KAAK,OACLP,KAAK,UACLQ,YAAY,OACZpC,MAAOI,EACPiC,SAAUzC,KAAK6B,eAEjB,2BAAOf,UAAU,SAASyB,KAAK,SAASnC,MAAM,qB,GAxDhCC,aCHTqC,EAAoB,SAAAxE,GAC7B,OAAO,aAAG2B,GAAI3B,EAAI2B,IAAgC3B,EAAI4B,SCG7C6C,EAAexD,0BA+BbyD,E,4MA5BXvD,MAAQ,CAAEwD,MAAO,I,EAEjBC,YAAc,K,EAEdvD,kB,sBAAoB,sBAAAvB,EAAA,sDAChB,EAAK8E,YAAc1F,EAAU4B,WAAW,SAASU,YAAW,SAAAC,GACxD,IAAMkD,EAAQlD,EAASoD,KAAKC,IAAIN,GAChC9D,QAAQK,IAAI,qBAAsB4D,GAClC,EAAKjD,SAAS,CAAEiD,aAJJ,2C,EAQpB9C,qBAAuB,WACnB,EAAK+C,e,uDAGC,IACED,EAAU7C,KAAKX,MAAfwD,MACA5C,EAAaD,KAAKE,MAAlBD,SAER,OACI,kBAAC0C,EAAaxC,SAAd,CAAwBC,MAAOyC,GAC1B5C,O,GAvBWI,aCoBb4C,EApBD,WACV,IAAMJ,EAAQjC,qBAAW+B,GACZ/B,qBAAW1B,GAExB,OACI,6BAAS4B,UAAU,SAEf,6BACI,4CACA,kBAAC,EAAD,OAGJ,qCAEC+B,EAAMG,KAAI,SAAAb,GAAI,OAAI,kBAAC,EAAD,iBAAUA,EAAV,CAAgBe,IAAKf,EAAKtC,WCbnDsD,EAAc,SAAC,GAAgD,IAA9C7E,EAA6C,EAA7CA,YAAaE,EAAgC,EAAhCA,SAAUD,EAAsB,EAAtBA,MAAOE,EAAe,EAAfA,UACnD,OACE,6BAASqC,UAAU,eACjB,yBAAKA,UAAU,wBACZtC,GAAY,yBAAK4E,IAAK5E,EAAU6E,IAAK/E,IACtC,yBAAKwC,UAAU,4BACb,kBAAC,IAAD,CAAMC,GAAG,wBACL,4BAAKzC,IAET,uBAAGwC,UAAU,SAASvC,GACtB,uBAAGuC,UAAU,cAAcI,IAAOzC,GAAW2C,cAGjD,6BAEE,4BAAQC,QAAS1D,GAAjB,eAMRwF,EAAYxB,aAAe,CACzBrD,YAAa,cACbC,MAAO,4BACPC,SAAU,qCACVC,UAAW,IAAIC,MAGFyE,QCUAG,E,4MAzCbjE,MAAQ,CAAEd,MAAO,GAAIgF,SAAU,I,EAE/B1B,aAAe,SAAAC,GAAU,IAAD,EACEA,EAAMC,OAAtBC,EADc,EACdA,KAAM5B,EADQ,EACRA,MAEd,EAAKR,SAAL,eAAiBoC,EAAO5B,K,EAG1B6B,aAAe,SAAAH,GACbA,EAAMI,iBAEN,EAAKtC,SAAS,CAAErB,MAAO,GAAIgF,SAAU,M,uDAG7B,IAAD,EACqBvD,KAAKX,MAAzBd,EADD,EACCA,MAAOgF,EADR,EACQA,SAEf,OACE,0BAAMzC,UAAU,SAASwB,SAAUtC,KAAKiC,cACtC,uCACA,2BACEM,KAAK,QACLP,KAAK,QACLQ,YAAY,QACZpC,MAAO7B,EACPkE,SAAUzC,KAAK6B,eAEjB,2BACEU,KAAK,WACLP,KAAK,WACLQ,YAAY,WACZpC,MAAOmD,EACPd,SAAUzC,KAAK6B,eAEjB,2BAAOU,KAAK,SAASnC,MAAM,YAC3B,4BAAQiB,QAAS5D,GAAjB,4B,GApCa4C,aCUNmD,EAPQ,WACnB,IAAM1F,EAAO8C,qBAAW1B,GAGxB,OAAO,6BAAMpB,EAAO,kBAAC,EAAgBA,GAAW,kBAAC,EAAD,QCuDrC2F,E,4MA5DXpE,MAAQ,CAAEf,YAAa,I,EACvBoF,WAAa,K,EAcb7B,aAAe,SAAAC,GAAU,IAAD,EACIA,EAAMC,OAAtBC,EADY,EACZA,KAAM5B,EADM,EACNA,MACd,EAAKR,SAAL,eAAiBoC,EAAO5B,K,EAG5BuD,aAAe,SAAA7B,GACXA,EAAMI,iBADc,IAEZ5D,EAAgB,EAAKe,MAArBf,YAEJA,GACA,EAAKL,QAAQsD,OAAO,CAAEjD,gBAGtB,EAAKsF,MACLtG,EAAQuG,MACHC,MAAM,iBACNA,MAAM,EAAK3F,KACX2F,MAAM,EAAKF,KAAK5B,MAChB+B,IAAI,EAAKH,MACTI,MAAK,SAAAC,GAAQ,OAAIA,EAASJ,IAAIK,oBAC9BF,MAAK,SAAAxF,GAAQ,OAAI,EAAKP,QAAQsD,OAAO,CAAE/C,iB,uDAI1C,IAAD,OACGF,EAAgB0B,KAAKX,MAArBf,YAER,OACI,6BAASwC,UAAU,eACf,0BAAMwB,SAAUtC,KAAK2D,cACjB,2BACIlB,SAAUzC,KAAK6B,aACfU,KAAK,OACLnC,MAAO9B,EACP0D,KAAK,cACLQ,YAAY,iBAEhB,2BAAOD,KAAK,OAAOsB,IAAK,SAAAA,GAAG,OAAI,EAAKH,WAAaG,KACjD,2BAAO/C,UAAU,SAASyB,KAAK,e,0BAjD3C,OAAOlF,EAAKsD,YAAYxC,M,8BAIxB,OAAOf,EAAUc,IAAV,gBAAuB8B,KAAK7B,Q,2BAInC,OAAO6B,KAAK0D,YAAc1D,KAAK0D,WAAWS,MAAM,O,GAb9B9D,aCApB+D,EAAU,SAAC,GAAkC,IAAhC5D,EAA+B,EAA/BA,QAAS1C,EAAsB,EAAtBA,KAAMW,EAAgB,EAAhBA,UAChC,OACE,6BAASqC,UAAU,WACjB,0BAAMA,UAAU,mBAAhB,OAAmChD,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAMQ,aACzC,0BAAMwC,UAAU,oBAAoBN,GACpC,0BAAMM,UAAU,sBAAsBI,IAAOzC,GAAW2C,cAK9DgD,EAAQzC,aAAe,CACrBpB,MAAO,yBACPC,QACE,0NACF1C,KAAM,CACJQ,YAAa,cACbC,MAAO,4BACPC,SAAU,sCAEZC,UAAW,IAAIC,MAGF0F,QCOAC,E,4MA9BbhF,MAAQ,CAAEmB,QAAS,I,EAEnBqB,aAAe,SAAAC,GAAU,IAAD,EACEA,EAAMC,OAAtBC,EADc,EACdA,KAAM5B,EADQ,EACRA,MACd,EAAKR,SAAL,eAAiBoC,EAAO5B,K,EAG1B6B,aAAe,SAAAH,GACbA,EAAMI,iBACN,EAAKhC,MAAMoE,SAAS,EAAKjF,OACzB,EAAKO,SAAS,CAAEY,QAAS,M,uDAGjB,IACAA,EAAYR,KAAKX,MAAjBmB,QACR,OACE,0BAAM8B,SAAUtC,KAAKiC,aAAcnB,UAAU,cAC3C,2BACEyB,KAAK,OACLP,KAAK,UACLQ,YAAY,UACZpC,MAAOI,EACPiC,SAAUzC,KAAK6B,eAEjB,2BAAOf,UAAU,SAASyB,KAAK,SAASnC,MAAM,wB,GAzB7BC,aCWVkE,EATE,SAAC,GAA4B,IAA1B7D,EAAyB,EAAzBA,SAAU4D,EAAe,EAAfA,SAC5B,OACE,6BAASxD,UAAU,YACjB,kBAAC,EAAD,CAAYwD,SAAUA,IACrB5D,EAASsC,KAAI,SAAAwB,GAAO,OAAI,kBAAC,EAAD,iBAAaA,EAAb,CAAsBtB,IAAKsB,EAAQ3E,WCanD4E,EAdE,SAACpE,GACd,IALoBqE,EAKdC,EAAmB,SAAAzE,GACrB,OACI,kBAAChB,EAAY0F,SAAb,MACK,SAAA9G,GAAI,OAAI,kBAACuC,EAAD,eAAWvC,KAAMA,GAAUoC,QAOhD,OAFAyE,EAAiBrG,YAAjB,oBAboBoG,EAasCC,GAZlCrG,aAAeoG,EAAiB1C,MAAQ,YAYhE,KAEO2C,GCTLE,E,4MACFxF,MAAQ,CAAE8C,KAAM,KAAMzB,SAAU,I,EAEhCoE,oBAAsB,K,EACtBC,wBAA0B,K,EAE1BxF,kB,sBAAoB,sBAAAvB,EAAA,sDAChB,EAAK8G,oBAAsB,EAAKjE,QAAQnB,YAAW,SAAAC,GAC/C,IAAMwC,EAAOO,EAAkB/C,GAC/B,EAAKC,SAAS,CAAEuC,YAGpB,EAAK4C,wBAA0B,EAAKC,YAAYtF,YAAW,SAAAC,GACvD,IAAMe,EAAWf,EAASoD,KAAKC,IAAIN,GACnC,EAAK9C,SAAS,CAAEc,gBARJ,2C,EAYpBX,qBAAuB,WACnB,EAAK+E,sBACL,EAAKC,2B,EAeTE,cAAgB,SAACT,GAAa,IAClB1G,EAAS,EAAKoC,MAAdpC,KACR,EAAKkH,YAAY3C,IAAjB,2BACOmC,GADP,IAEI1G,W,uDAIE,IAAD,EACsBkC,KAAKX,MAAxB8C,EADH,EACGA,KAAMzB,EADT,EACSA,SAEd,OACI,iCACMyB,GAAQ,kBAAC,EAASA,GACpB,kBAAC,EAAD,CACIzB,SAAUA,EAEV4D,SAAUtE,KAAKiF,mB,6BA5B3B,OAAOjF,KAAKE,MAAMgF,MAAMC,OAAOtF,K,8BAI/B,OAAOzC,EAAUc,IAAV,gBAAuB8B,KAAKoF,W,kCAInC,OAAOpF,KAAKa,QAAQ7B,WAAW,gB,GAhChBqB,aA4DRgF,cAAWZ,EAASI,ICnCpBS,MAzBf,WASI,OAPAC,qBAAU,WACN,IAAMC,EAAY5H,OAAO6H,SAASC,SAASC,MAAM,KACjD/G,QAAQK,IAAI,WAAYrB,OAAO6H,SAASC,UACxC9G,QAAQK,IAAI,WAAYuG,EAAU,IAClC5G,QAAQK,IAAI,WAAYuG,EAAU,MACnC,IAGC,0BAAM1E,UAAU,eACZ,kBAAC,IAAD,CAAMC,GAAG,iBACL,4CAEJ,kBAAC,EAAD,MACA,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO6E,OAAK,EAACC,KAAK,gBAAgBC,UAAW7C,IAC7C,kBAAC,IAAD,CAAO2C,OAAK,EAACC,KAAK,uBAAuBC,UAAWrC,IACpD,kBAAC,IAAD,CAAOmC,OAAK,EAACC,KAAK,yBAAyBC,UAAWjB,OChBtEkB,iBACI,kBAAC,IAAD,KACI,kBAAC,EAAD,KACI,kBAAC,EAAD,KACI,kBAAC,EAAD,SAIZC,SAASC,eAAe,W","file":"static/js/main.d56ad014.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\n\r\n// Your web app's Firebase configuration\r\nvar config = {\r\n    apiKey: \"AIzaSyB5ly-UL1WHGnsrbsiZBh6pTaTHkrBMTbA\",\r\n    authDomain: \"think-piece-be86e.firebaseapp.com\",\r\n    databaseURL: \"https://think-piece-be86e.firebaseio.com\",\r\n    projectId: \"think-piece-be86e\",\r\n    storageBucket: \"think-piece-be86e.appspot.com\",\r\n    messagingSenderId: \"569798124721\",\r\n    appId: \"1:569798124721:web:4ae024aae50669c6086e90\",\r\n    measurementId: \"G-JP5G8QWR31\"\r\n  };\r\n// Initialize Firebase\r\nfirebase.initializeApp(config);\r\n//firebase.analytics();\r\n\r\nexport const firestore = firebase.firestore();\r\nexport const auth = firebase.auth();\r\nexport const storage = firebase.storage();\r\n\r\nexport const provider = new firebase.auth.GoogleAuthProvider();\r\nexport const signInWithGoogle = () => auth.signInWithPopup(provider);\r\nexport const signOut = () => auth.signOut();\r\n\r\nwindow.firebase = firebase;\r\n\r\nexport const createUserProfileDocument = async (user, additionalData) => {\r\n    if (!user) return;\r\n\r\n    // Get a reference to the place in the databse where a user profile might be.\r\n    const userRef = firestore.doc(`users/${user.uid}`);\r\n\r\n    // Go and fetch the coument from that location.\r\n    const snapshot = await userRef.get();\r\n\r\n    if (!snapshot.exists) {\r\n        const {displayName, email, photoURL } = user;\r\n        const createdAt = new Date();\r\n        try {\r\n            await userRef.set({\r\n                displayName,\r\n                email,\r\n                photoURL,\r\n                createdAt,\r\n                ...additionalData\r\n            });\r\n        } catch (error) { console.error(`Error creating user`, error.message); }\r\n    }\r\n\r\n    return getUserDocument(user.uid);\r\n};\r\n\r\nexport const getUserDocument = async (uid) => {\r\n    if(!uid) return null;\r\n    try {\r\n        return firestore.collection('users').doc(uid);\r\n        /* const userDocument = await firestore.collection('users').doc(uid).get();\r\n\r\n        return { uid, ...userDocument.data() }; */\r\n    } catch (error) { console.log('Error fetching user', error.message ); }\r\n};\r\n\r\nexport default firebase;","import React, { Component, createContext } from 'react'\r\nimport { auth, createUserProfileDocument } from '../../firebase';\r\n\r\nexport const UserContext = createContext({ user: null });\r\n\r\nclass UserProvider extends Component {\r\n    state = { user: null };\r\n    unsubscribeFromAuth = null;\r\n\r\n\r\n    componentDidMount = async () => {\r\n        this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\r\n            if (userAuth) {\r\n                const userRef = await createUserProfileDocument(userAuth);\r\n                console.log('user from unsubscribeFromAuth', userAuth);\r\n                userRef.onSnapshot(snapshot => {\r\n                    this.setState({ user: \r\n                        { uid: snapshot.id, ...snapshot.data()}\r\n                    });\r\n                });\r\n                return this.setState({ user: userAuth });\r\n            }\r\n            this.setState({ user: null });\r\n        });\r\n    };\r\n\r\n    componentWillUnmount = () => {\r\n        this.unsubscribeFromAuth();\r\n    }\r\n\r\n    render() {\r\n        const { user } = this.state;\r\n        const { children } = this.props;\r\n\r\n        return (\r\n            <UserContext.Provider value={user}>\r\n                {children}\r\n            </UserContext.Provider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UserProvider;\r\n","import React, { useContext } from 'react';\r\nimport { firestore } from '../firebase';\r\nimport { UserContext } from '../components/providers/UserProvider';\r\n\r\nimport moment from 'moment';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction belongsToCurrentUser(currentUser, postAuthor) {\r\n    if (!currentUser) return false;\r\n    return currentUser.uid === postAuthor.uid;\r\n}\r\n\r\nconst Post = ({ id, title, content, user, createdAt, stars, comments }) => {\r\n    const currentUser = useContext(UserContext);\r\n\r\n    const postRef = firestore.doc(`posts/${id}`);\r\n    const remove = () => postRef.delete();\r\n    const star = () => {\r\n        if (!currentUser) {\r\n            alert('You should authenticate');\r\n            return null;\r\n        }\r\n        postRef.update({ stars: stars + 1 })\r\n    };\r\n\r\n\r\n    return (\r\n        <article className=\"Post\">\r\n            <div className=\"Post--content\">\r\n                <Link to={`/think-piece/posts/${id}`}>\r\n                    <h3>{title}</h3>\r\n                </Link>\r\n                <div>{content}</div>\r\n            </div>\r\n            <div className=\"Post--meta\">\r\n                <div>\r\n                    <p>\r\n                        <span role=\"img\" aria-label=\"star\">\r\n                            ⭐️\r\n            </span>\r\n                        {stars}\r\n                    </p>\r\n                    <p>\r\n                        <span role=\"img\" aria-label=\"comments\">\r\n                            🙊\r\n            </span>\r\n                        {comments}\r\n                    </p>\r\n                    <p>Posted by {user.displayName}</p>\r\n                    <p>{moment(createdAt.toDate()).calendar()}</p>\r\n                </div>\r\n                <div>\r\n                    <button className=\"star\" onClick={star}>Star</button>\r\n                    { belongsToCurrentUser(currentUser, user) && \r\n                        <button className=\"delete\" onClick={remove}>Delete</button>\r\n                    } \r\n                </div>\r\n            </div>\r\n        </article>\r\n    );\r\n};\r\n\r\nPost.defaultProps = {\r\n    title: 'An Incredibly Hot Take',\r\n    content:\r\n        'Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ducimus est aut dolorem, dolor voluptatem assumenda possimus officia blanditiis iusto porro eaque non ab autem nihil! Alias repudiandae itaque quo provident.',\r\n    user: {\r\n        id: '123',\r\n        displayName: 'Bill Murray',\r\n        email: 'billmurray@mailinator.com',\r\n        photoURL: 'https://www.fillmurray.com/300/300',\r\n    },\r\n    createdAt: new Date(),\r\n    stars: 0,\r\n    comments: 0,\r\n};\r\n\r\nexport default Post;\r\n","import React, { Component } from 'react';\r\nimport { firestore, auth } from '../firebase';\r\n\r\nclass AddPost extends Component {\r\n  state = { title: '', content: '' };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (!auth.currentUser) {\r\n        alert('You should authenticate');\r\n        return null;\r\n    }\r\n\r\n    const { title, content } = this.state;\r\n    const { uid, displayName, email, photoURL } = auth.currentUser || {};\r\n\r\n    const post = {\r\n      title,\r\n      content,\r\n      user: {\r\n        uid,\r\n        displayName,\r\n        email,\r\n        photoURL,\r\n      },\r\n      favorites: 0,\r\n      comments: 0,\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    firestore.collection('posts').add(post);\r\n\r\n    this.setState({ title: '', content: '' });\r\n  };\r\n\r\n  render() {\r\n    const { title, content } = this.state;\r\n    return (\r\n      <form onSubmit={this.handleSubmit} className=\"AddPost\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          placeholder=\"Title\"\r\n          value={title}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"content\"\r\n          placeholder=\"Body\"\r\n          value={content}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input className=\"create\" type=\"submit\" value=\"Create Post\" />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddPost;\r\n","export const collectIdsAndDocs = doc => { \r\n    return {  id: doc.id, /* id: doc.data().id, */ ...doc.data() };\r\n};\r\n","import React, { Component, createContext  } from 'react';\r\nimport { firestore } from '../../firebase';\r\nimport { collectIdsAndDocs } from '../../utilities';\r\n\r\nexport const PostsContext = createContext();\r\n\r\nclass PostsProvider extends Component {\r\n    state = { posts: []};\r\n\r\n    unsubscribe = null;\r\n\r\n    componentDidMount = async () => {\r\n        this.unsubscribe = firestore.collection('posts').onSnapshot(snapshot => {\r\n            const posts = snapshot.docs.map(collectIdsAndDocs);\r\n            console.log('posts in subscribe', posts);\r\n            this.setState({ posts });\r\n        });\r\n    };\r\n      \r\n    componentWillUnmount = () => {\r\n        this.unsubscribe();\r\n    }\r\n\r\n    render() {\r\n        const { posts } = this.state;\r\n        const { children } = this.props;\r\n\r\n        return (\r\n            <PostsContext.Provider  value={posts}>\r\n                {children}\r\n            </PostsContext.Provider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PostsProvider;","import React, { useContext } from 'react'\r\nimport Post from './Post';\r\nimport AddPost from './AddPost';\r\nimport { PostsContext } from './providers/PostsProvider';\r\nimport { UserContext } from './providers/UserProvider';\r\n\r\nconst Posts = () => {\r\n    const posts = useContext(PostsContext);\r\n    const user = useContext(UserContext);\r\n    //console.log('Posts, user', user);\r\n    return (\r\n        <section className=\"Posts\">\r\n\r\n            <div>\r\n                <h2>Add new post</h2>\r\n                <AddPost />\r\n            </div>\r\n\r\n            <h1>Posts</h1>\r\n            {/* <PostsContext.Consumer> */}\r\n            {posts.map(post => <Post {...post} key={post.id} />)}\r\n            {/*</PostsContext.Consumer> */}\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Posts;\r\n","import React from 'react';\r\n\r\nimport moment from 'moment';\r\nimport { signOut } from '../firebase';\r\n\r\nimport { Link} from 'react-router-dom';\r\n\r\nconst CurrentUser = ({ displayName, photoURL, email, createdAt}) => {\r\n  return (\r\n    <section className=\"CurrentUser\">\r\n      <div className=\"CurrentUser--profile\">\r\n        {photoURL && <img src={photoURL} alt={displayName} />}\r\n        <div className=\"CurrentUser--information\">\r\n          <Link to=\"/think-piece/profile\">\r\n              <h2>{displayName}</h2>\r\n          </Link>\r\n          <p className=\"email\">{email}</p>\r\n          <p className=\"created-at\">{moment(createdAt).calendar()}</p>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        {/* <div>{children}</div> */}\r\n        <button onClick={signOut}>Sign Out</button>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nCurrentUser.defaultProps = {\r\n  displayName: 'Bill Murray',\r\n  email: 'billmurray@mailinator.com',\r\n  photoURL: 'https://www.fillmurray.com/300/300',\r\n  createdAt: new Date(),\r\n};\r\n\r\nexport default CurrentUser;\r\n","import React, { Component } from 'react';\r\nimport { signInWithGoogle } from '../firebase';\r\n\r\nclass SignIn extends Component {\r\n  state = { email: '', password: '' };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    this.setState({ email: '', password: '' });\r\n  };\r\n\r\n  render() {\r\n    const { email, password } = this.state;\r\n\r\n    return (\r\n      <form className=\"SignIn\" onSubmit={this.handleSubmit}>\r\n        <h2>Sign In</h2>\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input type=\"submit\" value=\"Sign In\" />\r\n        <button onClick={signInWithGoogle}>Sign In With Google</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignIn;\r\n","import React, { useContext } from 'react';\r\nimport CurrentUser from './CurrentUser';\r\n//import SignInAndSignUp from './SignInAndSignUp';\r\nimport SignIn from './SignIn';\r\nimport { UserContext } from './providers/UserProvider';\r\n\r\nconst Authentication = () => {\r\n    const user = useContext(UserContext);\r\n    //if (loading) return null;\r\n    //console.log('Authentication user is ', user);\r\n    return <div>{user ? <CurrentUser {...user} /> : <SignIn />}</div>;\r\n};\r\n\r\nexport default Authentication;\r\n","import React, { Component } from 'react';\r\nimport { auth, firestore, storage } from '../firebase';\r\n//import { firestore } from 'firebase-admin';\r\n\r\nclass UserProfile extends Component {\r\n    state = { displayName: \"\" };\r\n    imageInput = null;\r\n\r\n    get uid() {\r\n        return auth.currentUser.uid;\r\n    }\r\n\r\n    get userRef() {\r\n        return firestore.doc(`users/${this.uid}`);\r\n    }\r\n\r\n    get file() {\r\n        return this.imageInput && this.imageInput.files[0];\r\n    }\r\n\r\n    handleChange = event => {\r\n        const { name, value } = event.target;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleSumbit = event => {\r\n        event.preventDefault();\r\n        const { displayName } = this.state;\r\n\r\n        if (displayName) {\r\n            this.userRef.update({ displayName });\r\n        }\r\n\r\n        if (this.file) {\r\n            storage.ref()\r\n                .child('user-profiles')\r\n                .child(this.uid)\r\n                .child(this.file.name)\r\n                .put(this.file)\r\n                .then(response => response.ref.getDownloadURL())\r\n                .then(photoURL => this.userRef.update({ photoURL }));\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { displayName } = this.state;\r\n\r\n        return (\r\n            <section className=\"UserProfile\">\r\n                <form onSubmit={this.handleSumbit}>\r\n                    <input \r\n                        onChange={this.handleChange}\r\n                        type=\"text\" \r\n                        value={displayName} \r\n                        name=\"displayName\" \r\n                        placeholder=\"Display Name\"\r\n                    />\r\n                    <input type=\"file\" ref={ref => this.imageInput = ref} />\r\n                    <input className=\"update\" type=\"submit\" />\r\n                </form>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UserProfile;","import React from 'react';\r\n\r\nimport moment from 'moment';\r\n\r\nconst Comment = ({ content, user, createdAt }) => {\r\n  return (\r\n    <article className=\"Comment\">\r\n      <span className=\"Comment--author\">{user?.displayName}</span>\r\n      <span className=\"Comment--content\">{content}</span>\r\n      <span className=\"Comment--timestamp\">{moment(createdAt).calendar()}</span>\r\n    </article>\r\n  );\r\n};\r\n\r\nComment.defaultProps = {\r\n  title: 'An Incredibly Hot Take',\r\n  content:\r\n    'Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ducimus est aut dolorem, dolor voluptatem assumenda possimus officia blanditiis iusto porro eaque non ab autem nihil! Alias repudiandae itaque quo provident.',\r\n  user: {\r\n    displayName: 'Bill Murray',\r\n    email: 'billmurray@mailinator.com',\r\n    photoURL: 'https://www.fillmurray.com/300/300',\r\n  },\r\n  createdAt: new Date(),\r\n};\r\n\r\nexport default Comment;\r\n","import React, { Component } from 'react';\r\n\r\nclass AddComment extends Component {\r\n  state = { content: '' };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    this.props.onCreate(this.state);\r\n    this.setState({ content: '' });\r\n  };\r\n\r\n  render() {\r\n    const { content } = this.state;\r\n    return (\r\n      <form onSubmit={this.handleSubmit} className=\"AddComment\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"content\"\r\n          placeholder=\"Comment\"\r\n          value={content}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input className=\"create\" type=\"submit\" value=\"Create Comment\" />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddComment;\r\n","import React from 'react'\r\nimport Comment from './Comment';\r\nimport AddComment from './AddComment';\r\n\r\nconst Comments = ({ comments, onCreate }) => {\r\n  return (\r\n    <section className=\"Comments\">\r\n      <AddComment onCreate={onCreate} />\r\n      {comments.map(comment => <Comment {...comment} key={comment.id} />)}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Comments;\r\n","import React from 'react'\r\nimport { UserContext } from './providers/UserProvider';\r\n\r\nconst getDisplayName = (WrappedCompenent) => {\r\n    return WrappedCompenent.displayName || WrappedCompenent.name || \"Component\";\r\n}\r\n\r\nconst withUser = (Component) => {\r\n    const WrappedComponent = props => {\r\n        return (\r\n            <UserContext.Consumer>\r\n                {user => <Component user={user} {...props}/>}\r\n            </UserContext.Consumer>\r\n        );\r\n    };\r\n\r\n    WrappedComponent.displayName = `WithUser(${getDisplayName(WrappedComponent)})`\r\n\r\n    return WrappedComponent;\r\n};\r\n\r\nexport default withUser;","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { firestore } from '../firebase';\r\nimport { collectIdsAndDocs } from '../utilities';\r\nimport Comments from './Comments';\r\nimport Post from './Post';\r\nimport withUser from './withUser';\r\n\r\nclass PostPage extends Component {\r\n    state = { post: null, comments: [] };\r\n\r\n    unsubscribeFromPost = null;\r\n    unsubscribeFromComments = null;\r\n\r\n    componentDidMount = async () => {\r\n        this.unsubscribeFromPost = this.postRef.onSnapshot(snapshot => {\r\n            const post = collectIdsAndDocs(snapshot);\r\n            this.setState({ post });\r\n        });\r\n\r\n        this.unsubscribeFromComments = this.commentsRef.onSnapshot(snapshot => {\r\n            const comments = snapshot.docs.map(collectIdsAndDocs);\r\n            this.setState({ comments });\r\n        });\r\n    };\r\n\r\n    componentWillUnmount = () => {\r\n        this.unsubscribeFromPost();\r\n        this.unsubscribeFromComments();\r\n    }\r\n\r\n    get postId() {\r\n        return this.props.match.params.id;\r\n    }\r\n\r\n    get postRef() {\r\n        return firestore.doc(`posts/${this.postId}`);\r\n    }\r\n\r\n    get commentsRef() {\r\n        return this.postRef.collection('comments');\r\n    }\r\n\r\n    createComment = (comment) => {\r\n        const { user } = this.props;\r\n        this.commentsRef.add({\r\n            ...comment,\r\n            user,\r\n        });\r\n    }\r\n    \r\n    render() {\r\n        const { post, comments } = this.state;\r\n        \r\n        return (\r\n            <section>\r\n                { post && <Post {...post}/>}\r\n                <Comments\r\n                    comments={comments}\r\n                    //postId={post.id}\r\n                    onCreate={this.createComment}\r\n                />\r\n            </section>\r\n        );\r\n    }\r\n\r\n};\r\n\r\nexport default withRouter(withUser(PostPage)); //add properties to this.props\r\n","import React, { useEffect } from 'react';\r\n\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\n\r\nimport Posts from './Posts';\r\nimport Authentication from './Authentication';\r\nimport UserProfile from './UserProfile';\r\nimport PostPage from './PostPage';\r\n\r\nfunction Application() {\r\n\r\n    useEffect(() => {\r\n        const parseData = window.location.pathname.split(\"/\");\r\n        console.log('pathname', window.location.pathname);\r\n        console.log('domain 0', parseData[0]);\r\n        console.log('domain 1', parseData[1]);\r\n    }, [])\r\n\r\n    return (\r\n        <main className=\"Application\">\r\n            <Link to=\"/think-piece/\">\r\n                <h1>Think Piece</h1>\r\n            </Link>\r\n            <Authentication />\r\n            <Switch>\r\n                <Route exact path=\"/think-piece/\" component={Posts}/>\r\n                <Route exact path=\"/think-piece/profile\" component={UserProfile}/>\r\n                <Route exact path=\"/think-piece/posts/:id\" component={PostPage}/>\r\n            </Switch>\r\n        </main>\r\n    );\r\n\r\n}\r\n\r\nexport default Application;\r\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\n\r\nimport './index.scss';\r\n\r\nimport Application from './components/Application';\r\nimport PostsProvider from './components/providers/PostsProvider';\r\nimport UserProvider from './components/providers/UserProvider';\r\n\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nrender(\r\n    <BrowserRouter>\r\n        <UserProvider>\r\n            <PostsProvider>\r\n                <Application />\r\n            </PostsProvider>\r\n        </UserProvider>\r\n    </BrowserRouter>,\r\n    document.getElementById('root'));"],"sourceRoot":""}